#计算机网络 #应试笔记与八股 

## 目录
```toc
```
## 3.1 数据链路层的功能

数据链路层的功能主要有：
- 为网络层提供服务，将可能出现差错的物理层改造为逻辑上无差错的数据链路，使数据链路层对网络层表现为一条无差错的链路。
- 链路管理
- 封装成帧和透明传输
- 流量控制
- 差错控制

基本概念：
- 结点：例如主机、路由器
- <font color="#9bbb59">链路</font>：指网络中两个节点之间的物理通道，链路的介质主要有双绞线、光纤、电磁波等。
- <font color="#9bbb59">数据链路</font>：指网络中两个节点之间的逻辑通道，把控制数据传输协议的硬件和软件加到链路上就构成数据链路。
- <font color="#9bbb59">帧</font>：链路层的协议数据单元，封装网络层数据报。

### 3.1.1 为网络层提供服务

数据链路层通常可以为网络层提供如下类型的服务：
1. 无确认的无连接服务，源机器只负责发送，目的机器也不需要发回确认。
2. 有确认的无连接服务，源机器负责发送，目的机器收到帧后必须发回确认。源机器在规定时间内未收到确认信号时就会重复传输丢失的帧。
3. 有确认的面向连接服务，对于此类型服务通常需要进行三个阶段：建立数据链路、传输帧、释放数据链路。
注：
1. 有连接就一定有确认，<font color="#c00000">不存在无确认的面向连接服务</font>。

### 3.1.2 链路管理

主要负责面向连接服务中连接的建立、维持和释放。

### 3.1.3 封装成帧和透明传输

封装成帧：
	如[[第一章 计算机网络体系结构#1 2 2 ISO OSI参考模型和TCP IP模型]]所述，数据链路层会对网络层传来的IP数据报添加头部 `H2` 和尾部 `T2` 。
	![[Pasted image 20240304133752.png]]
	其中帧的数据部分就是<font color="#c00000">最大传送单元(MTU)</font>，而<font color="#c00000">首部和尾部的重要作用就是帧定界</font>。

<font color="#9bbb59">透明传输</font>：
	不管链路层所传的数据是什么样的组合，都不应当影响其在链路上传输，故称为透明传输。

而常用的组帧方法有：
1. 字符计数法：用帧首部的一个字节(Byte)来标明帧内的字符数。
	![[Pasted image 20240304134441.png]]
	问题：<font color="#c00000">容易出错</font>。
2. 字符填充法：给一个固定的帧头帧尾，并提供冲突解决方法。
	![[Pasted image 20240304134613.png]]
	冲突解决方法：
	1. 当传输的是文本文件的时候一般不存在问题(数据部分和帧头、帧尾不可能出现重复)
	2. 当传输的是二进制文件的时候，需要在于帧头、帧尾以及转义字符(`ESC`)相同的二进制数据部分前加转义字符，如下图所示：
		![[Pasted image 20240304135100.png]]
	问题：
	1. 较为复杂且不稳定，<font color="#c00000">因此常用下方两种方法</font>。
3. 零比特填充法：给一个固定的帧头帧尾(`01111110`)，并通过打断连续的 `1` 来避免数据和帧头帧尾重复：
	冲突解决方法：
		当遇到连续的5个 `1` 时就会向其中添加一个 `0` ，以避免和帧头帧尾重复。
4. 违规编码法：例如当使用曼彻斯特编码等编码方式时，使用违规的编码来当做定界符。如局域网的 `IEEE 802.11` 标准就采用了此方法。
	具体实现(以曼彻斯特编码为例)：
		曼彻斯特编码规定 `前高后第表示1，前低后高表示0(或反之)` ，则可以使用 `前高后高` 、 `前低后低` 当做定界符。

### 3.1.5 差错控制

通常来说，传输过程中的差错都是由于噪声所引起，而噪声可以简单分类为如下两种：
1. <font color="#9bbb59">全局性噪声</font>：由于线路电气特性所带来的随机噪声(热噪声)，一般通过提高信噪比来减少干扰。
2. <font color="#9bbb59">局部性噪声</font>：由于外界特定的短暂原因所造成的冲击噪声，<font color="#c00000">是差错产生的主要原因</font>。主要通过编码技术来解决。

差错主要分为：
1. <font color="#9bbb59">位错</font>：比特位出错。
2. <font color="#9bbb59">帧错</font>：帧丢失、帧重复、帧失序。可以使用对帧编号、确认重传机制等处理(<font color="#c00000">前提是使用有确认的服务</font>)。

位错的解决方法有：
1. 检错编码：
	1. 奇偶校验码
	2. 循环冗余码(CRC)，<font color="#c00000">普遍使用此方式</font>。
2. 纠错编码，例如海明码。

<font color="#9bbb59">奇偶校验码</font>：
	前 `n-1` 位为信息源，最后一位表示序列中 `1` 的数量的奇偶。

<font color="#9bbb59">循环冗余码(CRC)</font>：
	

如七层结构图所示：
![[Pasted image 20240205010846.png]]
在数据从主机A传送向主机B的过程中，数据包需要层层封包到物理层，再层层解包回应用层以传递到主机B。

当单独研究数据链路层时，可以只研究路径上各数据链路层水平方向上的数据传递，如下图所示：
![[Pasted image 20240304131032.png]]








