#计算机网络 #应试笔记与八股 

## 目录

```toc
```

## 4.1 网络层的功能

网络层的主要任务是把<font color="#c00000">分组</font>从从源端传送到目的端，向上层提供简单的、无连接的、<font color="#c00000">尽最大努力交付</font>(可出错)的数据报服务，其主要功能如下：
1. 路由选择与分组转发：
	1. 路由选择：即在多条路由路径中选择一条较优路径
	2. 分组转发：将分组从源端正确传给目的端方向
2. 实现异构网络互联
3. 拥塞控制
    - 拥塞和流量控制的区别：
	1. <font color="#9bbb59">拥塞</font>是指所有节点都来不及接收分组导致的需要丢弃大量分组的网络状态，是<font color="#c00000">全局性的状态</font>，一般由网络负载过重引起。
	2. <font color="#9bbb59">流量控制</font>是指当发送方发送速率太快，接收方来不及接受时所需要进行的操作。
    - 其实现方法主要有：
	1. 开环控制(静态控制方法)
	2. 闭环控制(动态控制方法)

其中，网络互连主要依靠中继系统完成，各个网络层级的中继系统可以分为：
1. 物理层中继系统：转发器、集线器
2. 数据链路层中继系统：网桥、交换机
3. 网络层中继系统：路由器
4. 网络层以上的中继系统：网关

### 4.1.1 SDN的基本概念

根据网络层的基本任务，可以将网络层抽象地划分为2个平面，即 `控制平面` 和 `数据平面` ，划分示意图如下：
	![[Pasted image 20240314181028.png]]
其中，
- <font color="#c00000">控制平面主要负责转发表的计算和路由表的生成(路由选择算法)</font>。
- <font color="#c00000">数据平面的主要功能是根据转发表进行转发</font>；转发表存储与数字平面中，会根据分组首部找到对应的输出端口。

SDN即Software-Defined Networking，即软件定义的网络，而传统路由器和SDN的区别主要在于控制平面，传统路由器<font color="#c00000">每台路由器</font>都有自己的路由选择算法，而SDN将若干台路由器的<font color="#c00000">路由选择算法均集成到一个远程控制器</font>中，<font color="#c00000">远程控制器负责计算并分发转发表</font>，路由器原来的路由选择处理器负责与远程控制器通信并接收表项。
	![[Pasted image 20240314175906.png]]
远程控制器可能运行在高可靠性的远程数据中心中，或由ISP提供。

而SDN控制平面可以继续细分为：
1. 网络控制应用程序，负责监视、控制下层的网络设备
2. SDN控制器，负责维护准确的网络状态信息
	![[Pasted image 20240314181212.png]]
在这两层之间产生了两层API，即北向API和南向API，<font color="#c00000">用"上北下南"即可进行记忆</font>。
北向API由网络控制层应用程序调用，南向API由SDN控制器调用。

## 4.2 路由算法

路由算法主要是负责若干路由器之间通信时，应当选择怎样的路由线路的一个算法。
通常"最佳路由"是由分组从当前节点到目标节点所经过的路由器数(跳数)最少的一个路径。

路由表是通过路由选择算法产生的一个使用目标IP查询下一跳IP和接口的一个表，如下所示：
	![[Pasted image 20240314183055.png]]

### 4.2.1 静态路由与动态路由

路由算法主要可以分为：
- 静态路由算法：其指由网络管理员手动配置的路由信息，但是当网络拓扑结构发生变化时其需要网络管理员重新手动配置。通常应用于小范围、高稳定性要求的军事网络与商用网络。
- 动态路由算法：路由器间和与其相互连接的路由器间交换信息，并依靠算法优化得到的路径表。其会按照一定频率自动更新，可以适应不断变化的网络拓扑。

| 对比  | <center>静态路由算法</center>                  | <center>动态路由算法</center>    |
| --- | ---------------------------------------- | -------------------------- |
| 优点  | 简单、可靠，适用于负载稳定、拓扑不变的高安全要求的网络。<br>适用于小型网络。 | 路由更新快，适用于大型网络，可以及时响应网络拓扑变化 |
| 缺点  | 路由更新慢，不适用于大型网络。                          | 算法复杂，增加网络负担。               |

而路由选择协议可以进行分层设计，由于网络规模大，且部分单位的网络拓扑有保密需要，故可以将整个网络划分为若干<font color="#9bbb59">自治系统</font>(AS)。

总的来说，路由算法可以按照如下方式划分：
- 按照每个路由掌握的信息可以划分为：
	- 全局性动态路由算法：每个路由器都掌握完整的网络链路拓扑和链路费用信息，如OSPF协议。
	- 分散性动态路由算法：每个路由器只掌握物理相连的邻居及其拓扑费用，如RIP协议。
- 按照自治系统内外可以划分为：
	- 内部网关协议IGP：一个AS之内使用的路由选择协议，如RIP、OSPF协议
	- 外部网关协议EGP：AS之间使用的路由选择协议，如BGP协议(BGP-4)

## 4.3 IPv4

### 4.3.1 IPv4分组






