#计算机组成原理 #应试笔记与八股 

## 目录

```toc
```

## 3.1 存储器概述

按照离CPU的层次分类：
- ![[Pasted image 20250304111239.png]]
0. 寄存器
1. Cache
2. 主存
3. 辅存、外存：磁盘、U盘、磁带、光盘
其中：
1. <font color="#c00000">Cache-主存之间的数据同步是依靠硬件</font><span style="background:#fff88f"><font color="#c00000">自动完成的</font></span>(<font color="#c00000">解决了CPU和主存速度不匹配的问题</font>)
2. 主存-辅存之间的数据置换的方式有：
	1. <font color="#c00000">操作系统的页面置换算法</font>(实现了虚拟存储系统)
	2. 普通文件操作等

按照存储介质进行分类：
1. 半导体存储器
2. 磁性存储器
3. 光存储器

按照存取方式进行分类：
1. 随机存取存储器(RAM、Random Access Memory)：读写任意一个存储单元所需时间都相同，例如内存等。
2. 顺序存取存储器(SAM、Sequential Access Memory)：读写一个存储单元所需时间取决于存储单元所在位置，例如磁带等。
3. 直接存取存储器(DAM、Direct Access Memory)：既有随机存取的特性，也有顺序存取的特性。区域(扇区)间随机读取，区域(扇区)内顺序读取，例如磁盘等。
4. 相联存储器(CAM、Content Addressed Memory)：可以按照内容检索到存储位置进行读写的存储器，例如快表。

按照可更改性分类：
1. 读写存储器
2. 只读存储器

按照信息的可保存性分类：
- 按照断电后信息是否可保存分类：
	1. 易失性存储器：断电后信息丢失
	2. 非易失性存储器：断电后信息不丢失
- 按照信息读出后，原存储信息是否丢失分类：
	1. 破坏性读出存储器：读取后原信息被破坏，例如DRAM
	2. 非破坏性读出存储器：例如SRAM、磁盘、光盘等

## 3.2 主存储器

### 3.2.1 主存储器的基本构成

主存储器的基本构成如下图所示：
	![[Pasted image 20250306142951.png]]
	![[Pasted image 20250305160157.png]]
其可以简化为下图的结构：
	![[Pasted image 20250305160216.png]]
其中：
- MAR为内存地址寄存器
- MDR为内存数据寄存器
- 存储器负责存储二进制数据

### 3.2.2 DRAM和SRAM芯片

#### 3.2.2.1 DRAM芯片

DRAM为动态随机存储器，通常使用栅极电容存储信息，其特性有：
- 功耗较SRAM低
- 一个基本存储单元只需要一个晶体管，密度比SRAM高，速度比SRAM慢
- 读出数据时会消耗电容中的电荷，读出后应有重写操作，也称"再生"
- 需要定期刷新以保持数据(电荷会流失)，通常2ms就要刷新一次
- 通常用于制作主存(运行内存)

DRAM和SRAM的存储单元差异可见下图：
	![[Pasted image 20250306161121.png]]
- 注：左为DRAM，右为SRAM

此外，由于DRAM内存较大，因此其译码器在设计时也不能像左侧那样只使用一个译码器去寻找 $2^n$ 个地址(此方案需要在译码器和存储单元之间连接 $2^n$ 个选通线)，所以通常设计成右侧的二维排列形式，将地址拆分为行地址和列地址(当然，现在已经有了三维的排列形式)。
	![[Pasted image 20250306162457.png]]

##### 3.2.2.1.1 DRAM的刷新

DRAM的刷新：
1. 通常以行为单位，每次刷新一行。
2. 刷新时先读出数据，随后再次写入。
3. 刷新会占用一个读写周期。
因此在刷新时，有如下的刷新策略：
1. 每次读写完都刷新一行：
	- 会导致读写的存取周期翻倍
2. 2ms内集中刷新一次：
	- 这种策略在刷新时，CPU无法访问RAM，称为访存"死区"

#### 3.2.2.2 SRAM芯片

SRAM为静态随机存储器，通常使用双稳态触发器存储信息，其特性有：
- 功耗比DRAM高
- 一个基本存储单元需要六个晶体管，密度地，价格高，速度更快
- 其有外置供电，读出数据不会破坏电平状态
- 通常用于制作Cache

DRAM和SRAM对比如下：

| <center>类型特点</center> |  SRAM  | DRAM |
| --------------------- | :----: | :--: |
| 信息存储单元                | 双稳态触发器 |  电容  |
| 读出是否破坏数据              |   否    |  是   |
| 读出后是否需要重写             |   否    |  是   |
| 访问速度                  |   快    |  慢   |
| 集成度                   |   低    |  高   |
| 功耗                    |   高    |  低   |
| 制造成本                  |   高    |  低   |
| 断电后数据是否丢失             |   是    |  是   |
| 是否需要刷新                |   否    |  是   |
| 常用场景                  | Cache  | 运行内存 |
