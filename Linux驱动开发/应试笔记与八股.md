---
number headings: auto, first-level 2, max 6, 1.1
---
#嵌入式 #Linux驱动开发 #应试笔记与八股 

## 1 目录

```toc
```

## 2 通用部分

### 2.1 如果Linux中的一个进程的某个线程崩溃了，进程会变成什么状态

考察企业：
- 海康威视

1. 在C和C++中，一个进程中的某个线程崩溃时，该进程一定会崩溃并变成"僵尸"状态或"已终止"状态：
	1. 如果一个父进程的子进程的某个线程崩溃时，该子进程被父进程调用 `wait` 或 `waitpid` 回收处理之前会保持僵尸进程状态。
	2. 如果父进程调用了 `wait` 等接口回收了子进程，则该子进程会变成"已终止"状态。这个父进程可以是 `init` 进程或者 `shell` 进程等。
2. 但是在Python和Java等语言中，一个进程中的某个线程崩溃并不一定会导致整个进程崩溃，例如JVM拦截了 `SIGSEGV` (段错误)等信号，从而阻止整个进程崩溃。

### 2.2 Linux中的内存命令有哪些

考察企业：
- 海康威视

1. 任务管理器类命令： `top` 、 `htop` 
2. todo

### 2.3 Linux的设备和驱动是如何进行匹配的

考察企业：
- 信捷电气

1. 对于非可拔插式设备，其通常会直接定义于设备树中，并参与内核的编译。比如CPU、内存节点、总线、时钟源、GPIO等。设备树在内核启动的时候就会被加载，随后查找驱动程序并尝试匹配。
2. 对于可插拔式设备，比如USB、PCIe设备等，这些设备通常不会被静态的定义于设备树中，但是USB和PCIe的控制器会被定义于设备树中，这些控制器检测新设备的插入并通知系统加载对应的驱动程序。
3. TODO

### 2.4 Linux中如果使用malloc申请一片内存，存入数据后释放，这片地址的值会怎么样，程序能否继续读写，数据是否还存在

考察企业：
- 海康威视

1. 在内存被申请释放后，这片内存数据不会立即被清除，这片内存上的数据会存放一段时间直到这片内存对应的物理空间被再次使用。
2. 在这片内存被释放后，该片内存已经不再归程序所有，其数据可靠性不会有任何保障。
3. 在这片内存被申请回收后，指向这片内存的指针会被称作"悬挂指针"，此时如果再去进行读写操作则是未定义行为

### 2.5 Linux中进程间通信的方式

考查企业：
- CVTE

Linux系统中提供了很多种进程间通信的方式，主要包含如下：
1. 管道：
2. 信号：
3. 消息队列：
4. 共享内存：
5. 信号量：
6. 套接字：
7. 文件系统：
8. 内存映射文件：

### 2.6 Linux中的设备可以分为哪些类型

考察企业：
- CVTE

1. 在Linux系统中，设备主要可以分为字符设备、块设备和网络设备三大类。其主要特征为：
	1. 字符设备：可以逐字节进行数据读写的设备，以字节流顺序访问。通常不支持随机访问


### 2.7 讲一下Linux系统中字符设备的基本框架

考查企业：
- CVTE 嵌入式

### 2.8 讲一讲在Linux中驱动GPIO的大概过程

考查企业：
- 商汤科技 嵌入式

### 2.9 讲一讲在Linux中驱动I2C的大概过程

考查企业：
- 商汤科技 嵌入式

## 3 应用层技术

### 3.1 讲一下dbus库

考察企业：
- 小米 BSP

## 4 设备树专题

### 4.1 讲一下设备树的生命周期

![[devicetree -- kernel internals and practical troubleshooting#^qfilmj]]
其生命周期为：
1. dts源文件被dtc编译为dtb。
2. dtb被存储到启动镜像中(通常与内核镜像一起存储，在启动时被一起加载)。
3. bootloader从启动镜像中加载dtb，在经过可选的修改后被存入内存。
4. 在加载内核时，DTB在内存中的地址会被传递给kernel(通常以启动参数方式传递)。
5. 内核使用FDT初始化硬件，并生成扩展设备树，该拓展设备树在启动后可以被更改。

## 5 系统启动技术专题

### 5.1 什么是bootloader

考查企业：
- 小米 BSP


### 5.2 讲一讲uboot的启动流程

考察企业：
- 虹软 C++开发

