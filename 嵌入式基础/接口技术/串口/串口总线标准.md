---
number headings: auto, first-level 2, max 6, 1.1
---
#嵌入式 

## 1 目录

```toc
```

## 2 串口总线

串口总线都是在通信双方约定固定波特率之后，分别在波特率对应的时间长度下，通过不同的电平或电气特性，分别表示0或1后，再约定固定的起始位、数据位、校验位、停止位、流控制位等数据传输的规则和格式后组成的一种通信协议。

### 2.1 串口总线的电气特性分类

为了应对不同的应用场景，德州仪器和EIA定义了若干串口的电气参数来进行二进制的数据传输，其主要有如下几种：
- TTL(Transistor-Transistor Logic，晶体管-晶体管逻辑)：
	- 输入电压准位
		- 逻辑高电平范围：2.0V以上
		- 逻辑低电平范围：0.8V以下
	- 输出电压准位
		- 逻辑高电平范围：2.4V以上
		- 逻辑低电平范围：0.4V以下
	因此TTL仅有0.4V的抗干扰能力，其抗干扰能力较差，一般通信距离不超过15m。<font color="#c00000">是全双工通信</font>。
- RS232(Recommended Standard)：
	RS232仅仅只是修改了电平定义，在一定程度上增加了其抗干扰能力。其所定义的电平范围为±(3-15)V，即：
	- 输入电压准位
		- <font color="#c00000">逻辑高</font>电平范围：<span style="background:#fff88f"><font color="#c00000">-</font></span>3~<span style="background:#fff88f"><font color="#c00000">-</font></span>15V
		- <font color="#c00000">逻辑低</font>电平范围：<span style="background:#fff88f"><font color="#c00000">+</font></span>3~<span style="background:#fff88f"><font color="#c00000">+</font></span>15V
	- 输出电压准位
		- <font color="#c00000">逻辑高</font>电平范围：<span style="background:#fff88f"><font color="#c00000">-</font></span>5~<span style="background:#fff88f"><font color="#c00000">-</font></span>15V
		- <font color="#c00000">逻辑低</font>电平范围：<span style="background:#fff88f"><font color="#c00000">+</font></span>5~<span style="background:#fff88f"><font color="#c00000">+</font></span>15V
	其增加了容许干扰的电压范围。<font color="#c00000">仍是全双工通信</font>。
- RS485：
	RS485将原先的高低电平表示逻辑电平的方法<font color="#c00000">修改为了查分信号表示逻辑电平</font>。如下图所示：
	![[Pasted image 20241023220901.png]]
	RS485定义了一个U+和一个U-线路，通过定义这两个线路之间的电压差来定义逻辑电平。其两根线的共模电压为-7V~+12V：
	- 逻辑高电平：$U+>U-$
	- 逻辑低电平：$U+<U-$
	<font color="#c00000">由于其只保留了一对差分线路</font>，<span style="background:#fff88f"><font color="#c00000">因此485是半双工通信</font></span>。
	但是由于是原生半双工，因此其天生无法离开通信协议的支持，<font color="#c00000">通常使用Modbus</font>或者Profibus<font color="#c00000">作为其通信协议</font>，Modbus支持一主多从模式。Modbus是<font color="#c00000">应用层</font>报文传输协议。
但是无论电气特性如何改变，<font color="#c00000">其数据传输的规则和格式都是相同的</font>。因此这些电平之间也可以使用电平转换芯片来做电平转换。

#### 2.1.1 RS485

RS485规定了允许的最大设备数量为32个节点，即单位负载下可以接32个从机。当大于32个设备时需要增加中继器。这是电气负载、电容阻抗、噪声干扰层面进行考虑的。

### 2.2 串口总线的



## 3 485常用的通信协议

### 3.1 Modbus

Modbus有三种协议，但是RS485支持的有两种：
- Modbus ASCII
- Modbus RTU
其中，Modbus协议强制要求所有Modbus设备支持Modbus RTU，因此RS485设备一般使用的也是Modbus RTU

![[Modbus#2 Modbus概述]]


