---
number headings: auto, first-level 2, max 6, 1.1
---
#嵌入式 

## 1 目录

```toc
```

## 2 概述


Modbus协议规定，使用Modbus的设备必须支持Modbus RTU，且默认为Modbus RTU，因此大多数设备使用的均为Modbus RTU。


### 2.1 Modbus RTU

Modbus RTU可以分为主站和从站，请求报文可以分为如下几个部分：

| 地址域   | 功能码   | 数据   | 差错校验 |
| ----- | ----- | ---- | ---- |
| 1Byte | 1Byte | 长度不定 |      |
其中：
- 地址域共计1Byte，被划分为：
	- 地址 $0$ 被划分为广播地址
	- 地址 $[1, 247]$ 被划分为子节点单独地址
	- 地址 $[248, 255]$ 被用作保留地址
	因此：
	- 从机地址范围被定义在 $[1, 247]$ 
	- 保留区可以用于设置特定地址段的广播指令等
- `${功能码}${数据}` 部分被称作PDU(协议数据单元)，




根据地址不同，Modbus可以分为广播和单播两种模式：
- 在广播模式下，所有从站必须执行主站命令而无需应答返回。
- 在单播模式下，子节点必须做出应答，只有应答完成后主节点才可以做出下一个事务处理。
同一时刻，主节点只能发起一个Modbus事务处理。
<font color="#c00000">不管任何模式，子节点都不会主动发送数据</font>。




